<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Document Central Interactif</title>
    <!-- Chargement de Tailwind CSS pour un style rapide et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Styles CSS personnalis√©s pour les accordions */
        .accordion-button {
            background-color: #4A90E2; /* Bleu */
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            text-align: left;
            border: none;
            outline: none;
            transition: 0.4s;
            border-radius: 0.5rem; /* Coins arrondis */
            margin-bottom: 0.5rem; /* Espacement entre les boutons */
            font-family: "Inter", sans-serif;
        }

        .active, .accordion-button:hover {
            background-color: #357ABD; /* Bleu plus fonc√© au survol/actif */
        }

        .accordion-content {
            padding: 0 18px;
            background-color: #f0f8ff; /* Bleu tr√®s clair */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #4A90E2;
        }
        .accordion-content p {
            padding: 1rem 0;
            font-family: "Inter", sans-serif;
            color: #333;
        }
        /* Style pour les liens */
        a {
            color: #1a73e8; /* Bleu Google */
            text-decoration: underline;
        }
        a:hover {
            color: #0d47a1; /* Bleu plus fonc√© au survol */
        }
    </style>
</head>
<body class="bg-gray-100 font-sans text-gray-800 antialiased leading-normal tracking-wide">
    <div class="container mx-auto p-4 md:p-8 lg:p-12 max-w-4xl">
        <!-- En-t√™te -->
        <header class="text-center mb-8">
            <h1 class="text-5xl font-bold text-gray-900 mb-2 font-inter">Mon Document Central Interactif</h1>
            <p class="text-xl text-gray-600">Explorez notre constellation de documents</p>
        </header>

        <!-- Section Introduction -->
        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4 font-inter">Introduction √† la Constellation üöÄ</h2>
            <p class="text-lg leading-relaxed mb-4">
                Bienvenue sur notre plateforme documentaire interactive. Ce document central est votre point de d√©part pour explorer
                un vaste r√©seau de connaissances interconnect√©es. Utilisez les "tiroirs" ci-dessous pour acc√©der aux d√©tails sans surcharger le texte.
            </p>
            <p class="text-lg leading-relaxed">
                Notre objectif est de vous offrir une navigation fluide et intuitive entre nos diff√©rents documents.
                Chaque lien vous m√®nera √† une ressource pertinente, que ce soit un glossaire d√©taill√© ou un rapport sp√©cialis√©.
            </p>
        </section>

        <!-- Section Glossaire Interactif (Utilisation d'accordions/tiroirs) -->
        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-3xl font-semibold text-gray-800 mb-6 font-inter">Glossaire Dynamique et Termes Cl√©s üìö</h2>
            <p class="text-lg leading-relaxed mb-6">Cliquez sur un terme pour afficher sa d√©finition et d√©couvrir des liens vers des documents associ√©s, ou utilisez le bouton IA pour une explication d√©taill√©e.</p>

            <!-- Tiroir 1: Robot -->
            <button class="accordion-button rounded-lg">Robot</button>
            <div class="accordion-content">
                <p>
                    Une machine programmable capable d'ex√©cuter automatiquement des t√¢ches complexes.
                    Pour une √©tude approfondie, voir le document :
                    <a href="document_robotique.html" target="_blank" class="font-bold">Robots et Automatisation</a>.
                </p>
                <p class="mt-4">
                    <button data-term="robot" class="llm-detail-button bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 text-sm">
                        ‚ú® D√©tailler avec l'IA
                    </button>
                </p>
                <div class="llm-response mt-2 p-3 bg-purple-50 rounded-lg hidden text-sm text-gray-700 leading-relaxed border border-purple-200"></div>
                <div class="llm-loading mt-2 flex items-center justify-center hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <span class="ml-3 text-purple-700">Chargement...</span>
                </div>
            </div>

            <!-- Tiroir 2: Fonction -->
            <button class="accordion-button rounded-lg">Fonction</button>
            <div class="accordion-content">
                <p>
                    Un bloc de code r√©utilisable qui effectue une t√¢che sp√©cifique. Elle peut prendre des entr√©es (arguments) et retourner des valeurs.
                    Pour des exemples de code, visitez notre <a href="document_programmation.html#fonctions" target="_blank" class="font-bold">Guide de Programmation (section fonctions)</a>.
                </p>
                <p class="mt-4">
                    <button data-term="fonction" class="llm-detail-button bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 text-sm">
                        ‚ú® D√©tailler avec l'IA
                    </button>
                </p>
                <div class="llm-response mt-2 p-3 bg-purple-50 rounded-lg hidden text-sm text-gray-700 leading-relaxed border border-purple-200"></div>
                <div class="llm-loading mt-2 flex items-center justify-center hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <span class="ml-3 text-purple-700">Chargement...</span>
                </div>
            </div>

            <!-- Tiroir 3: IA -->
            <button class="accordion-button rounded-lg">IA</button>
            <div class="accordion-content">
                <p>
                    Abr√©viation d'Intelligence Artificielle. Un domaine de l'informatique visant √† cr√©er des syst√®mes capables de simuler des comp√©tences cognitives humaines.
                    D√©couvrez les applications ici : <a href="document_ia.html" target="_blank" class="font-bold">Applications de l'IA</a>.
                </p>
                <p class="mt-4">
                    <button data-term="intelligence artificielle" class="llm-detail-button bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 text-sm">
                        ‚ú® D√©tailler avec l'IA
                    </button>
                </p>
                <div class="llm-response mt-2 p-3 bg-purple-50 rounded-lg hidden text-sm text-gray-700 leading-relaxed border border-purple-200"></div>
                <div class="llm-loading mt-2 flex items-center justify-center hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <span class="ml-3 text-purple-700">Chargement...</span>
                </div>
            </div>

            <!-- Tiroir 4: Algorithme -->
            <button class="accordion-button rounded-lg">Algorithme</button>
            <div class="accordion-content">
                <p>
                    Une s√©quence finie et non-ambigu√´ d'instructions ou d'op√©rations permettant de r√©soudre un probl√®me ou d'accomplir une t√¢che.
                    Voir notre <a href="document_algorithmique.html" target="_blank" class="font-bold">Manuel d'Algorithmique</a> pour plus de d√©tails.
                </p>
                <p class="mt-4">
                    <button data-term="algorithme" class="llm-detail-button bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 text-sm">
                        ‚ú® D√©tailler avec l'IA
                    </button>
                </p>
                <div class="llm-response mt-2 p-3 bg-purple-50 rounded-lg hidden text-sm text-gray-700 leading-relaxed border border-purple-200"></div>
                <div class="llm-loading mt-2 flex items-center justify-center hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <span class="ml-3 text-purple-700">Chargement...</span>
                </div>
            </div>

            <!-- Tiroir 5: Compiler -->
            <button class="accordion-button rounded-lg">Compiler</button>
            <div class="accordion-content">
                <p>
                    Processus de traduction du code source (√©crit par un humain) dans un langage que l'ordinateur peut comprendre et ex√©cuter.
                    Plus d'infos sur le <a href="https://fr.wikipedia.org/wiki/Compilation" target="_blank" class="font-bold">Wikip√©dia de la Compilation</a>.
                </p>
                <p class="mt-4">
                    <button data-term="compilation" class="llm-detail-button bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 text-sm">
                        ‚ú® D√©tailler avec l'IA
                    </button>
                </p>
                <div class="llm-response mt-2 p-3 bg-purple-50 rounded-lg hidden text-sm text-gray-700 leading-relaxed border border-purple-200"></div>
                <div class="llm-loading mt-2 flex items-center justify-center hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <span class="ml-3 text-purple-700">Chargement...</span>
                </div>
            </div>

            <!-- Tiroir 6: Variable -->
            <button class="accordion-button rounded-lg">Variable</button>
            <div class="accordion-content">
                <p>
                    Un emplacement nomm√© dans la m√©moire de l'ordinateur utilis√© pour stocker des donn√©es.
                    Explorez les types de donn√©es dans le <a href="document_programmation.html#types" target="_blank" class="font-bold">Guide de Programmation (section types)</a>.
                </p>
                <p class="mt-4">
                    <button data-term="variable" class="llm-detail-button bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 text-sm">
                        ‚ú® D√©tailler avec l'IA
                    </button>
                </p>
                <div class="llm-response mt-2 p-3 bg-purple-50 rounded-lg hidden text-sm text-gray-700 leading-relaxed border border-purple-200"></div>
                <div class="llm-loading mt-2 flex items-center justify-center hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <span class="ml-3 text-purple-700">Chargement...</span>
                </div>
            </div>

        </section>

        <!-- Section Liens vers d'autres documents de la constellation -->
        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4 font-inter">Explorer la Constellation üî≠</h2>
            <p class="text-lg leading-relaxed mb-4">
                Acc√©dez directement √† d'autres documents cl√©s de notre r√©seau :
            </p>
            <ul class="list-disc list-inside text-lg space-y-2">
                <li><a href="document_technique_approfondi.html" class="font-bold">Document Technique Approfondi</a> : D√©tails sur l'architecture syst√®me.</li>
                <li><a href="rapport_recherche.html" class="font-bold">Rapport de Recherche Annuel</a> : Les derni√®res avanc√©es.</li>
                <li><a href="faq.html" class="font-bold">FAQ</a> : Foire aux questions pour un d√©pannage rapide.</li>
                <li><a href="https://google.com" target="_blank" class="font-bold">Moteur de recherche Google</a> : Pour des recherches externes.</li>
            </ul>
        </section>

        <!-- Pied de page -->
        <footer class="text-center text-gray-500 text-sm mt-10">
            <p>&copy; 2024 Votre Organisation. Tous droits r√©serv√©s.</p>
        </footer>
    </div>

    <script>
        // Script JavaScript pour l'interactivit√© des accordions (tiroirs)
        document.addEventListener('DOMContentLoaded', function() {
            const accordionButtons = document.querySelectorAll('.accordion-button');
            const llmDetailButtons = document.querySelectorAll('.llm-detail-button');

            // --- Logique d'ouverture/fermeture des accordions ---
            accordionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const content = this.nextElementSibling; // Le contenu est l'√©l√©ment juste apr√®s le bouton

                    if (content.style.maxHeight) {
                        content.style.maxHeight = null; // Ferme le tiroir
                    } else {
                        // Ferme les autres accordions ouverts
                        accordionButtons.forEach(otherButton => {
                            if (otherButton !== this && otherButton.classList.contains('active')) {
                                otherButton.classList.remove('active');
                                otherButton.nextElementSibling.style.maxHeight = null;
                            }
                        });
                        content.style.maxHeight = content.scrollHeight + "px"; // Ouvre le tiroir
                    }
                });
            });

            // --- Int√©gration de l'API Gemini pour les d√©tails IA ---
            const API_KEY = ""; // Laissez cette cha√Æne vide. Canvas fournira la cl√© API.

            async function callGeminiAPI(term, responseDiv, loadingDiv) {
                const systemPrompt = "Vous √™tes un expert en informatique et en technologie. Fournissez une explication claire, concise et p√©dagogique du terme suivant, adapt√©e √† un public ayant des connaissances g√©n√©rales. Incluez des exemples simples si pertinent. La r√©ponse doit √™tre en fran√ßais et tenir en 2-3 paragraphes.";
                const userQuery = `D√©taillez le terme: "${term}".`;

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                loadingDiv.classList.remove('hidden');
                responseDiv.classList.add('hidden');
                responseDiv.innerHTML = ''; // Nettoyer la r√©ponse pr√©c√©dente

                let retries = 0;
                const maxRetries = 3;
                let delay = 1000; // 1 second

                while (retries < maxRetries) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            if (response.status === 429) { // Too Many Requests
                                throw new Error('Rate limit exceeded, retrying...');
                            }
                            throw new Error(`Erreur API: ${response.status} ${response.statusText}`);
                        }

                        const result = await response.json();
                        const candidate = result.candidates?.[0];

                        if (candidate && candidate.content?.parts?.[0]?.text) {
                            const text = candidate.content.parts[0].text;
                            responseDiv.innerHTML = `<p>${text}</p>`;
                            responseDiv.classList.remove('hidden');
                            loadingDiv.classList.add('hidden');
                            return; // Succ√®s, sortir de la boucle
                        } else {
                            throw new Error("Aucune r√©ponse valide de l'IA.");
                        }

                    } catch (error) {
                        console.error("Erreur lors de l'appel API Gemini:", error);
                        retries++;
                        if (retries < maxRetries) {
                            await new Promise(res => setTimeout(res, delay));
                            delay *= 2; // Exponential backoff
                        } else {
                            responseDiv.innerHTML = `<p class="text-red-600">Erreur : Impossible d'obtenir des d√©tails de l'IA apr√®s plusieurs tentatives. (${error.message || 'Probl√®me de connexion'})</p>`;
                            responseDiv.classList.remove('hidden');
                            loadingDiv.classList.add('hidden');
                        }
                    }
                }
            }


            llmDetailButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const term = this.dataset.term; // R√©cup√®re le terme du bouton
                    const contentDiv = this.closest('.accordion-content');
                    const responseDiv = contentDiv.querySelector('.llm-response');
                    const loadingDiv = contentDiv.querySelector('.llm-loading');

                    // Si une r√©ponse est d√©j√† l√†, on la vide et on la cache pour une nouvelle recherche
                    if (!responseDiv.classList.contains('hidden')) {
                         responseDiv.innerHTML = '';
                         responseDiv.classList.add('hidden');
                    }
                    callGeminiAPI(term, responseDiv, loadingDiv);
                });
            });
        });
    </script>
</body>
</html>
